/**
 * @file s21_tetris_pieces.c
 * @brief Статические данные всех тетромино для игры Tetris
 *
 * Данный файл содержит предопределённые формы всех семи типов тетромино
 * (I, O, T, S, Z, J, L) в четырёх возможных ротациях (0°, 90°, 180°, 270°).
 * Каждое тетромино представлено в виде матрицы 4x4, где:
 * - значение 0 обозначает пустую ячейку,
 * - значения 1–7 соответствуют типу тетромино и используются для идентификации
 *   при копировании в игровое поле и отрисовке.
 *
 * @details
 * Основная цель файла — предоставить централизованное хранилище геометрии
 * фигур, независимое от логики игры и визуализации. Это позволяет:
 * - легко модифицировать формы (например, поддержка SRS),
 * - избежать дублирования данных,
 * - обеспечить быстрый доступ к формам во время выполнения.
 *
 * Важно: библиотека не интерпретирует значения 1–7 как цвета — это
 * ответственность пользовательского интерфейса (UI). Данные используются только
 * как метки типа.
 *
 * @note Используется в связке с tetris_getPieceData() для безопасного доступа
 *       к матрицам по индексам типа и ротации.
 *
 * @author provemet
 * @version 2.1
 * @date 2025-12-17
 * @see s21_tetris_internals.h, tetris_getPieceData()
 */

#include "s21_tetris_internals.h"

/**
 * @brief Глобальный массив данных всех тетромино в различных ротациях
 *
 * Данный массив хранит форму каждого из семи типов тетромино (I, O, T, S, Z, J,
 * L) во всех четырёх возможных ротациях (0°, 90°, 180°, 270°). Каждое тетромино
 * представлено в виде матрицы 4x4, где:
 * - значение 0 означает пустую ячейку,
 * - значения 1–7 соответствуют принадлежности к типу тетромино и используются
 *   для идентификации при отрисовке (например, 1 = I-фигура, 2 = O-фигура и
 * т.д.).
 *
 * @details
 * - Первое измерение: тип тетромино (0–6), соответствует TETRIS_NUM_PIECES
 * - Второе измерение: ротация (0–3), соответствует TETRIS_ROTATIONS
 * - Третье и четвёртое измерения: строка и столбец в матрице 4x4
 *
 * Важно: библиотека не интерпретирует значения 1–7 как цвета — это задача UI.
 * Игровая логика работает только с числами, а визуализация сопоставляет
 * каждое число с соответствующим цветом.
 *
 * @note Массив объявлен как const, поэтому его содержимое нельзя изменить
 *       во время выполнения. Все данные размещаются в секции .rodata.
 *
 * @warning Изменение структуры массива (например, количество типов или ротаций)
 *          должно сопровождаться обновлением констант TETRIS_NUM_PIECES и
 *          TETRIS_ROTATIONS, иначе возможны выходы за границы массива.
 *
 * Пример использования:
 * @code
 * const int (*data)[4] = TETROMINO_DATA[TETROMINO_I][ROTATION_90];
 * // Получаем вертикальную I-фигуру
 * @endcode
 */
const int TETROMINO_DATA[TETRIS_NUM_PIECES][TETRIS_ROTATIONS][4][4] = {
    // ========== I-PIECE (value = 1) ==========
    {
        // Rotation 0 (horizontal)
        {
            {0, 0, 0, 0},
            {1, 1, 1, 1},
            {0, 0, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 90 (vertical)
        {
            {0, 0, 1, 0},
            {0, 0, 1, 0},
            {0, 0, 1, 0},
            {0, 0, 1, 0},
        },
        // Rotation 180 (horizontal)
        {
            {0, 0, 0, 0},
            {0, 0, 0, 0},
            {1, 1, 1, 1},
            {0, 0, 0, 0},
        },
        // Rotation 270 (vertical)
        {
            {0, 1, 0, 0},
            {0, 1, 0, 0},
            {0, 1, 0, 0},
            {0, 1, 0, 0},
        },
    },

    // ========== O-PIECE (value = 2) ==========
    {
        // Rotation 0
        {
            {0, 2, 2, 0},
            {0, 2, 2, 0},
            {0, 0, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 90
        {
            {0, 2, 2, 0},
            {0, 2, 2, 0},
            {0, 0, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 180
        {
            {0, 2, 2, 0},
            {0, 2, 2, 0},
            {0, 0, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 270
        {
            {0, 2, 2, 0},
            {0, 2, 2, 0},
            {0, 0, 0, 0},
            {0, 0, 0, 0},
        },
    },

    // ========== T-PIECE (value = 3) ==========
    {
        // Rotation 0
        {
            {0, 3, 0, 0},
            {3, 3, 3, 0},
            {0, 0, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 90
        {
            {0, 3, 0, 0},
            {0, 3, 3, 0},
            {0, 3, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 180
        {
            {0, 0, 0, 0},
            {3, 3, 3, 0},
            {0, 3, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 270
        {
            {0, 3, 0, 0},
            {3, 3, 0, 0},
            {0, 3, 0, 0},
            {0, 0, 0, 0},
        },
    },

    // ========== S-PIECE (value = 4) ==========
    {
        // Rotation 0
        {
            {0, 4, 4, 0},
            {4, 4, 0, 0},
            {0, 0, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 90
        {
            {0, 4, 0, 0},
            {0, 4, 4, 0},
            {0, 0, 4, 0},
            {0, 0, 0, 0},
        },
        // Rotation 180
        {
            {0, 0, 0, 0},
            {0, 4, 4, 0},
            {4, 4, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 270
        {
            {0, 4, 0, 0},
            {0, 4, 4, 0},
            {0, 0, 4, 0},
            {0, 0, 0, 0},
        },
    },

    // ========== Z-PIECE (value = 5) ==========
    {
        // Rotation 0
        {
            {5, 5, 0, 0},
            {0, 5, 5, 0},
            {0, 0, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 90
        {
            {0, 0, 5, 0},
            {0, 5, 5, 0},
            {0, 5, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 180
        {
            {0, 0, 0, 0},
            {0, 5, 5, 0},
            {5, 5, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 270
        {
            {0, 5, 0, 0},
            {0, 5, 5, 0},
            {0, 0, 5, 0},
            {0, 0, 0, 0},
        },
    },

    // ========== J-PIECE (value = 6) ==========
    {
        // Rotation 0
        {
            {6, 0, 0, 0},
            {6, 6, 6, 0},
            {0, 0, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 90
        {
            {0, 6, 6, 0},
            {0, 6, 0, 0},
            {0, 6, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 180
        {
            {0, 0, 0, 0},
            {6, 6, 6, 0},
            {0, 0, 6, 0},
            {0, 0, 0, 0},
        },
        // Rotation 270
        {
            {0, 6, 0, 0},
            {0, 6, 0, 0},
            {6, 6, 0, 0},
            {0, 0, 0, 0},
        },
    },

    // ========== L-PIECE (value = 7) ==========
    {
        // Rotation 0
        {
            {0, 0, 7, 0},
            {7, 7, 7, 0},
            {0, 0, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 90
        {
            {0, 7, 0, 0},
            {0, 7, 0, 0},
            {0, 7, 7, 0},
            {0, 0, 0, 0},
        },
        // Rotation 180
        {
            {0, 0, 0, 0},
            {7, 7, 7, 0},
            {7, 0, 0, 0},
            {0, 0, 0, 0},
        },
        // Rotation 270
        {
            {7, 7, 0, 0},
            {0, 7, 0, 0},
            {0, 7, 0, 0},
            {0, 0, 0, 0},
        },
    },
};